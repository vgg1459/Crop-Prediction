<div class="tab-pane fade show active profile-card" id="myListings">
    <h4 class="text-center">üìã My Land Listings</h4>
    <div id="sellerListings"></div>  <!-- ‚úÖ Correct ID -->
</div>



<script>
    document.addEventListener("DOMContentLoaded", fetchMyListings);
    
    async function fetchMyListings() {
    const token = localStorage.getItem("token");
    if (!token) {
        alert("Please log in to view your listings.");
        window.location.href = "login.html";
        return;
    }

    console.log("üì© Fetching my listings...");

    try {
        const response = await fetch("http://localhost:5000/api/my-listings", {
            method: "GET",
            headers: {
                "Authorization": `Bearer ${token}`,  // ‚úÖ Send Token Here
                "Content-Type": "application/json"
            }
        });

        if (!response.ok) {
            throw new Error("Failed to fetch listings.");
        }

        const data = await response.json();
        console.log("‚úÖ My Listings Response:", data);

        const listingsContainer = document.getElementById("sellerListings");

        if (!data || data.length === 0) {
            listingsContainer.innerHTML = `<p class='text-center text-muted'>No listings found.</p>`;
            return;
        }

        listingsContainer.innerHTML = data.map(listing => `
            <div class="card mb-3">
                <div class="card-body">
                    <h5 class="card-title">${listing.location}</h5>
                    <p class="card-text"><strong>Price:</strong> ‚Çπ${listing.price}</p>
                    <p class="card-text"><strong>Size:</strong> ${listing.landSize} acres</p>
                    <button class="btn btn-danger" onclick="deleteListing('${listing._id}')">Remove</button>
                </div>
            </div>
        `).join("");

    } catch (error) {
        console.error("‚ùå Error fetching listings:", error);
        alert("Failed to load listings. Please try again.");
    }
}
</script>
<script>
    async function deleteListing(listingId) {
    const token = localStorage.getItem("token");
    if (!token) {
        alert("Please log in to delete listings.");
        window.location.href = "login.html";
        return;
    }

    if (!confirm("Are you sure you want to delete this listing?")) {
        return;
    }

    try {
        const response = await fetch(`http://localhost:5000/api/delete-listing/${listingId}`, {
            method: "DELETE",
            headers: {
                "Authorization": `Bearer ${token}`,
                "Content-Type": "application/json"
            }
        });

        if (!response.ok) {
            throw new Error("Failed to delete listing.");
        }

        alert("Listing deleted successfully!");
        fetchMyListings(); // Refresh the listings after deletion
    } catch (error) {
        console.error("‚ùå Error deleting listing:", error);
        alert("Failed to delete listing. Please try again.");
    }
}
</script>
    